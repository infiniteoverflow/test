<!DOCTYPE html>
<html lang="en" data-theme="light" id="html-root">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<title>Happy Birthday Deluluuuuu ğŸŒ¹</title>
<!-- Set theme before paint to avoid flash -->
<script>
  (function(){
    const hour = new Date().getHours();
    // Dark between midnight (0) and 7AM (exclusive)
    document.getElementById('html-root').dataset.theme = (hour >= 0 && hour < 7) ? 'dark' : 'light';
  })();
</script>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Pinyon+Script&display=swap" rel="stylesheet" />
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     THEME TOKENS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  :root {
    /* shared */
    --rose:       #c0446a;
    --rose-light: #e07898;
    --gold:       #b07830;
    --gold-light: #d4a450;
    --transition-duration: 0.7s;
  }

  [data-theme="light"] {
    --bg:           #fff8fa;
    --bg2:          #fff3f7;
    --text:         #3a1020;
    --text-soft:    #7a3050;
    --text-muted:   #b07080;
    --rose-pale:    #f9d0de;
    --blush:        #fce8f0;
    --card-bg:      rgba(255,255,255,0.8);
    --card-border:  rgba(192,68,106,0.12);
    --card-shadow:  rgba(192,68,106,0.08);
    --name-from:    #c0446a;
    --name-mid:     #b07830;
    --name-to:      #e07898;
    --orb1-color:   rgba(240,160,190,0.22);
    --orb2-color:   rgba(212,164,80,0.14);
    --orb3-color:   rgba(255,180,210,0.18);
    --orb4-color:   rgba(240,160,190,0.12);
    --petal-alpha:  0.35;
    --section-grad: rgba(255,225,238,0.5);
    --scroll-line:  var(--rose-light);
    --divider-mid:  var(--rose-pale);
    --toggle-bg:    rgba(255,255,255,0.85);
    --toggle-border:rgba(192,68,106,0.2);
    --toggle-shadow:rgba(192,68,106,0.15);
    --ripple-color: #120008;
    --wish-bg:      rgba(255,255,255,0.55);
    --seal-bg:      rgba(255,255,255,0.85);
  }

  [data-theme="dark"] {
    --bg:           #0a0005;
    --bg2:          #120008;
    --text:         #fff5f8;
    --text-soft:    #fde8f0;
    --text-muted:   #e07898;
    --rose-pale:    #c0446a;
    --blush:        #fde8f0;
    --card-bg:      rgba(255,255,255,0.055);
    --card-border:  rgba(201,150,78,0.18);
    --card-shadow:  rgba(0,0,0,0.45);
    --name-from:    #fde8f0;
    --name-mid:     #e8c07a;
    --name-to:      #e07898;
    --orb1-color:   rgba(176,48,96,0.22);
    --orb2-color:   rgba(201,150,78,0.12);
    --orb3-color:   rgba(224,120,152,0.16);
    --orb4-color:   rgba(176,48,96,0.1);
    --petal-alpha:  0.55;
    --section-grad: rgba(40,5,20,0.6);
    --scroll-line:  var(--rose-light);
    --divider-mid:  var(--rose);
    --toggle-bg:    rgba(18,0,8,0.85);
    --toggle-border:rgba(224,120,152,0.25);
    --toggle-shadow:rgba(176,48,96,0.3);
    --ripple-color: #fff8fa;
    --wish-bg:      rgba(255,255,255,0.04);
    --seal-bg:      rgba(255,255,255,0.04);
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     BASE
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  html { scroll-behavior: smooth; }

  body {
    background: var(--bg);
    font-family: 'Cormorant Garamond', serif;
    color: var(--text);
    overflow-x: hidden;
    transition: background var(--transition-duration) ease, color var(--transition-duration) ease;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCROLL PROGRESS BAR
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #progress-bar {
    position: fixed;
    top: 0; left: 0;
    height: 3px;
    width: 0%;
    z-index: 99999;
    pointer-events: none;
    background: linear-gradient(90deg, #c0446a, #d4a450, #e07898, #c0446a);
    background-size: 300%;
    animation: progressShimmer 3s linear infinite;
    box-shadow: 0 0 8px rgba(192,68,106,0.6), 0 0 2px rgba(192,68,106,0.8);
    border-radius: 0 2px 2px 0;
  }
  @keyframes progressShimmer {
    0%   { background-position: 0% 0%; }
    100% { background-position: 300% 0%; }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PAGE-LOAD PARTICLE BURST
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .burst-particle {
    position: fixed;
    pointer-events: none;
    z-index: 9990;
    font-style: normal;
    will-change: transform, opacity;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     TYPEWRITER CURSOR
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .tw-cursor {
    display: inline-block;
    width: 2px;
    height: 0.85em;
    background: var(--rose);
    margin-left: 3px;
    vertical-align: middle;
    animation: cursorBlink 0.75s ease-in-out infinite;
    border-radius: 1px;
    transition: background 0.4s;
  }
  @keyframes cursorBlink {
    0%,100% { opacity: 1; }
    50%      { opacity: 0; }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     THEME TOGGLE BUTTON
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #theme-toggle {
    position: fixed;
    top: 1.1rem;
    right: 1.1rem;
    z-index: 10000;
    width: 46px;
    height: 46px;
    border-radius: 50%;
    border: 1px solid var(--toggle-border);
    background: var(--toggle-bg);
    backdrop-filter: blur(14px);
    box-shadow: 0 4px 20px var(--toggle-shadow);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: border-color 0.4s, box-shadow 0.4s, transform 0.2s;
    -webkit-tap-highlight-color: transparent;
  }
  #theme-toggle:active { transform: scale(0.9); }

  .toggle-icon {
    position: absolute;
    font-size: 1.25rem;
    transition: opacity 0.35s ease, transform 0.5s ease;
    line-height: 1;
  }
  .icon-sun  { opacity: 0; transform: rotate(-90deg) scale(0.5); }
  .icon-moon { opacity: 1; transform: rotate(0deg) scale(1); }

  [data-theme="dark"] .icon-sun  { opacity: 1; transform: rotate(0deg) scale(1); }
  [data-theme="dark"] .icon-moon { opacity: 0; transform: rotate(90deg) scale(0.5); }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     RIPPLE OVERLAY (theme switch)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #theme-ripple {
    position: fixed;
    z-index: 9999;
    border-radius: 50%;
    pointer-events: none;
    background: var(--ripple-color);
    width: 100px;
    height: 100px;
    top: 0; right: 0;
    transform-origin: center;
    transform: translate(50%, -50%) scale(0);
    opacity: 0;
    transition: none;
  }
  #theme-ripple.expanding {
    transition: transform 0.75s cubic-bezier(0.4,0,0.2,1), opacity 0.1s;
    opacity: 1;
    transform: translate(50%, -50%) scale(40);
  }
  #theme-ripple.collapsing {
    transition: opacity 0.3s ease 0.05s;
    opacity: 0;
    transform: translate(50%, -50%) scale(40);
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     CANVAS & ORBS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #petal-canvas {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    transition: opacity 0.5s ease;
  }

  .orb {
    position: fixed;
    border-radius: 50%;
    filter: blur(90px);
    pointer-events: none;
    z-index: 0;
    animation: driftOrb 14s ease-in-out infinite alternate;
    transition: background 0.8s ease;
  }
  .orb1 { width:400px;height:400px;background:var(--orb1-color); top:-140px;left:-100px; animation-delay:0s; }
  .orb2 { width:320px;height:320px;background:var(--orb2-color); bottom:0;right:-80px; animation-delay:-5s; }
  .orb3 { width:280px;height:280px;background:var(--orb3-color); top:35%;left:0; animation-delay:-9s; }
  .orb4 { width:240px;height:240px;background:var(--orb4-color); bottom:20%;left:25%; animation-delay:-3s; }

  @keyframes driftOrb {
    from { transform: translate(0,0) scale(1); }
    to   { transform: translate(20px,15px) scale(1.1); }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SECTIONS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .page {
    position: relative;
    z-index: 2;
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 3.5rem 1.8rem;
    transition: background 0.6s ease;
  }

  #sister { background: linear-gradient(180deg, transparent, var(--section-grad), transparent); }
  #memory { background: linear-gradient(180deg, transparent, var(--section-grad), transparent); }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HERO
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #hero { text-align: center; gap: 1.4rem; }

  .for-label {
    font-size: 0.72rem;
    letter-spacing: 0.45em;
    text-transform: uppercase;
    color: var(--gold);
    opacity: 0;
    animation: riseIn 1s 0.2s forwards;
    transition: color 0.5s;
  }

  .name-wrap {
    position: relative;
    display: inline-block;
    opacity: 0;
    animation: riseIn 1.1s 0.6s forwards;
  }

  .name {
    font-family: 'Pinyon Script', cursive;
    font-size: clamp(4rem, 20vw, 7rem);
    line-height: 0.95;
    background: linear-gradient(140deg, var(--name-from) 0%, var(--name-mid) 40%, var(--name-to) 70%, var(--name-from) 100%);
    background-size: 250%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: shimmer 6s linear 1.7s infinite;
    transition: filter 0.5s;
  }

  [data-theme="light"] .name { filter: drop-shadow(0 2px 14px rgba(192,68,106,0.18)); }
  [data-theme="dark"]  .name { filter: drop-shadow(0 0 32px rgba(192,68,106,0.5)); }

  .name-glow-ring {
    position: absolute;
    inset: -12px;
    border-radius: 50%;
    border: 1px solid rgba(192,68,106,0.15);
    pointer-events: none;
    animation: glowRing 3s ease-in-out 1.7s infinite;
  }
  @keyframes glowRing {
    0%,100% { box-shadow: 0 0 20px rgba(192,68,106,0.12); opacity:0.5; }
    50%      { box-shadow: 0 0 50px rgba(192,68,106,0.3);  opacity:1; }
  }

  @keyframes shimmer {
    0%   { background-position: 0% 50%; }
    100% { background-position: 200% 50%; }
  }

  .hero-tagline {
    font-size: clamp(1rem, 4.5vw, 1.35rem);
    font-style: italic;
    font-weight: 300;
    color: var(--rose);
    opacity: 0;
    animation: riseIn 1s 1.2s forwards;
    transition: color 0.5s;
  }
  [data-theme="dark"] .hero-tagline { color: var(--rose-pale); }

  .hero-rose {
    font-size: 2.4rem;
    opacity: 0;
    animation: riseIn 1s 1.6s forwards, breathe 4s 2.6s ease-in-out infinite;
  }
  [data-theme="light"] .hero-rose { filter: drop-shadow(0 2px 8px rgba(192,68,106,0.2)); }
  [data-theme="dark"]  .hero-rose { filter: drop-shadow(0 0 14px rgba(192,68,106,0.6)); }

  .hero-date {
    font-size: 0.75rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--gold);
    opacity: 0;
    animation: riseIn 1s 2s forwards;
    transition: color 0.5s;
  }

  @keyframes breathe {
    0%,100% { transform: scale(1) rotate(-3deg); }
    50%      { transform: scale(1.18) rotate(3deg); }
  }
  @keyframes riseIn {
    from { opacity:0; transform:translateY(28px); }
    to   { opacity:1; transform:translateY(0); }
  }

  .scroll-hint {
    position: absolute;
    bottom: 1.8rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    opacity: 0;
    animation: riseIn 1s 2.5s forwards;
  }
  .scroll-hint span { font-size: 0.65rem; letter-spacing: 0.3em; text-transform:uppercase; color:var(--rose-light); transition: color 0.5s; }
  .scroll-line {
    width: 1px; height: 40px;
    background: linear-gradient(to bottom, var(--rose-light), transparent);
    animation: scrollPulse 2s ease-in-out infinite;
  }
  @keyframes scrollPulse {
    0%,100% { opacity:0.5; transform:scaleY(1); }
    50%      { opacity:1; transform:scaleY(1.3); }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     GLASS CARDS
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #sister { gap: 2rem; }

  .section-eyebrow {
    font-size: 0.7rem;
    letter-spacing: 0.4em;
    text-transform: uppercase;
    color: var(--gold);
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.8s ease, color 0.5s;
    text-align: center;
  }
  .section-eyebrow.visible { opacity:1; transform:translateY(0); }

  .glass-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: 28px;
    padding: 2.4rem 2rem;
    backdrop-filter: blur(16px);
    box-shadow: 0 8px 40px var(--card-shadow), inset 0 1px 0 rgba(255,255,255,0.12);
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 0.9s ease, transform 0.9s ease,
                background 0.6s ease, border-color 0.6s ease, box-shadow 0.6s ease;
    width: 100%;
  }
  .glass-card.visible { opacity:1; transform:translateY(0); }
  .glass-card + .glass-card { transition-delay: 0.2s; }

  .card-icon { font-size: 1.6rem; margin-bottom: 0.8rem; display: block; }

  .glass-card p {
    font-size: clamp(1rem, 4.5vw, 1.15rem);
    line-height: 1.9;
    font-weight: 300;
    color: var(--text-soft);
    transition: color 0.5s;
  }
  .glass-card p em   { color: var(--rose-light); font-style: italic; }
  .glass-card p strong { color: var(--gold-light); font-weight: 600; transition: color 0.5s; }
  [data-theme="light"] .glass-card p strong { color: var(--gold); }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     WISHES
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #wishes { gap: 1.8rem; }

  .wishes-heading {
    font-family: 'Pinyon Script', cursive;
    font-size: clamp(3rem, 14vw, 5rem);
    color: var(--rose);
    text-align: center;
    opacity: 0;
    transform: scale(0.92);
    transition: all 1s ease, color 0.5s, filter 0.5s;
  }
  .wishes-heading.visible { opacity:1; transform:scale(1); }
  [data-theme="light"] .wishes-heading { filter: drop-shadow(0 2px 10px rgba(192,68,106,0.15)); }
  [data-theme="dark"]  .wishes-heading { color: var(--gold-light); filter: drop-shadow(0 0 20px rgba(212,164,80,0.4)); }

  .wish-item {
    display: flex;
    align-items: flex-start;
    gap: 1.1rem;
    padding: 1.2rem 1.4rem;
    border-left: 2px solid var(--rose-pale);
    opacity: 0;
    transform: translateX(-30px);
    transition: all 0.7s ease, background 0.5s ease, border-color 0.5s ease;
    width: 100%;
    background: var(--wish-bg);
    border-radius: 0 16px 16px 0;
  }
  .wish-item.visible { opacity:1; transform:translateX(0); }
  .wish-item:nth-child(even) {
    transform: translateX(30px);
    border-left: none;
    border-right: 2px solid var(--gold-light);
    flex-direction: row-reverse;
    text-align: right;
    border-radius: 16px 0 0 16px;
  }
  .wish-item:nth-child(even).visible { transform:translateX(0); }

  .wi-icon {
    font-size: 1.8rem;
    flex-shrink: 0;
    animation: iconFloat 4s ease-in-out infinite;
  }
  .wish-item:nth-child(2) .wi-icon { animation-delay:0.3s; }
  .wish-item:nth-child(3) .wi-icon { animation-delay:0.6s; }
  .wish-item:nth-child(4) .wi-icon { animation-delay:0.9s; }
  .wish-item:nth-child(5) .wi-icon { animation-delay:1.2s; }

  @keyframes iconFloat {
    0%,100% { transform:translateY(0); }
    50%      { transform:translateY(-6px); }
  }

  .wi-text {
    font-size: clamp(0.95rem, 4vw, 1.1rem);
    line-height: 1.7;
    font-weight: 300;
    color: var(--text-soft);
    transition: color 0.5s;
  }
  .wi-label {
    font-size: 0.65rem;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--gold);
    display: block;
    margin-bottom: 0.2rem;
    transition: color 0.5s;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MEMORY
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #memory { gap: 2rem; text-align: center; }

  .memory-quote {
    font-family: 'Pinyon Script', cursive;
    font-size: clamp(2rem, 10vw, 3.2rem);
    line-height: 1.4;
    color: var(--rose);
    opacity: 1;               /* typewriter handles reveal, not fade */
    transform: translateY(30px);
    transition: transform 1s ease, color 0.5s, filter 0.5s;
    max-width: 340px;
    min-height: 2em;          /* reserve space before typing starts */
  }
  .memory-quote.visible { transform:translateY(0); }
  [data-theme="light"] .memory-quote { filter: drop-shadow(0 2px 10px rgba(192,68,106,0.15)); }
  [data-theme="dark"]  .memory-quote { color: var(--rose-pale); filter: drop-shadow(0 0 14px rgba(192,68,106,0.5)); }

  .memory-divider {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    width: 100%;
    opacity: 0;
    transition: opacity 0.8s ease 0.3s;
  }
  .memory-divider.visible { opacity:1; }
  .md-line { flex:1; height:1px; background: linear-gradient(to right, transparent, var(--divider-mid), transparent); }
  .md-icon  { font-size: 1.2rem; }

  .memory-body {
    font-size: clamp(0.95rem, 4vw, 1.1rem);
    line-height: 1.9;
    font-weight: 300;
    color: var(--text-soft);
    max-width: 340px;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.9s ease 0.5s, color 0.5s;
  }
  .memory-body.visible { opacity:1; transform:translateY(0); }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     FINALE
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #finale { text-align: center; gap: 2rem; }

  .finale-roses {
    display: flex;
    gap: 1rem;
    justify-content: center;
    font-size: 2rem;
    opacity: 0;
    transition: opacity 0.8s ease;
  }
  .finale-roses.visible { opacity:1; }
  .finale-roses span { animation: roseFloat 3.5s ease-in-out infinite; }
  .finale-roses span:nth-child(2) { animation-delay:0.5s; font-size:1.5rem; }
  .finale-roses span:nth-child(3) { animation-delay:1s; }
  [data-theme="light"] .finale-roses span { filter: drop-shadow(0 2px 8px rgba(192,68,106,0.2)); }
  [data-theme="dark"]  .finale-roses span { filter: drop-shadow(0 0 12px rgba(192,68,106,0.6)); }

  @keyframes roseFloat {
    0%,100% { transform:translateY(0) rotate(-5deg); }
    50%      { transform:translateY(-14px) rotate(5deg); }
  }

  .finale-title {
    font-family: 'Pinyon Script', cursive;
    font-size: clamp(3.2rem, 16vw, 6rem);
    line-height: 1.1;
    background: linear-gradient(140deg, var(--name-from), var(--name-mid), var(--name-to), var(--name-from));
    background-size: 300%;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: shimmer 5s linear infinite;
    opacity: 0;
    transform: scale(0.9);
    transition: all 1.1s ease 0.2s, filter 0.5s;
  }
  .finale-title.visible { opacity:1; transform:scale(1); }
  [data-theme="light"] .finale-title { filter: drop-shadow(0 2px 14px rgba(192,68,106,0.2)); }
  [data-theme="dark"]  .finale-title { filter: drop-shadow(0 0 30px rgba(192,68,106,0.5)); }

  .finale-from {
    font-size: clamp(0.85rem, 3.5vw, 1rem);
    letter-spacing: 0.15em;
    font-style: italic;
    color: var(--text-muted);
    opacity: 0;
    transition: opacity 0.8s ease 0.5s, color 0.5s;
  }
  .finale-from.visible { opacity:1; }

  .finale-seal {
    width: 80px; height: 80px;
    border-radius: 50%;
    border: 1px solid var(--card-border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    background: var(--seal-bg);
    backdrop-filter: blur(8px);
    opacity: 0;
    transition: opacity 0.8s ease 0.8s, background 0.5s, box-shadow 0.5s;
    animation: rotateSeal 20s linear infinite;
  }
  .finale-seal.visible { opacity:1; }
  [data-theme="light"] .finale-seal { box-shadow: 0 4px 24px rgba(192,68,106,0.12), 0 0 0 6px rgba(192,68,106,0.05); }
  [data-theme="dark"]  .finale-seal { box-shadow: 0 0 40px rgba(192,68,106,0.4), 0 0 80px rgba(212,164,80,0.2); }

  @keyframes rotateSeal {
    from { transform:rotate(0deg); }
    to   { transform:rotate(360deg); }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MUSIC FAB
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #music-btn {
    position: fixed;
    bottom: 1.4rem;
    right: 1.1rem;
    z-index: 10000;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    border: 1px solid var(--toggle-border);
    background: var(--toggle-bg);
    backdrop-filter: blur(14px);
    box-shadow: 0 4px 20px var(--toggle-shadow);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    -webkit-tap-highlight-color: transparent;
    transition: border-color 0.4s, box-shadow 0.4s, transform 0.2s;
    overflow: visible;
  }
  #music-btn:active { transform: scale(0.88); }

  #music-btn::before {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    border: 1.5px solid var(--rose-light);
    opacity: 0;
    transform: scale(1);
    pointer-events: none;
  }
  #music-btn.playing::before {
    opacity: 0.55;
    animation: musicPulse 1.8s ease-in-out infinite;
  }
  @keyframes musicPulse {
    0%,100% { transform: scale(1);    opacity: 0.5; }
    50%      { transform: scale(1.25); opacity: 0.12; }
  }

  .music-bars {
    display: flex;
    align-items: flex-end;
    gap: 2.5px;
    height: 20px;
    transition: opacity 0.3s;
  }
  .bar {
    width: 3px;
    border-radius: 2px;
    background: var(--rose);
    transform-origin: bottom;
    transition: background 0.4s;
  }
  .bar1 { height: 8px;  animation: barDance 1s  0.00s ease-in-out infinite; }
  .bar2 { height: 14px; animation: barDance 1s  0.15s ease-in-out infinite; }
  .bar3 { height: 20px; animation: barDance 1s  0.30s ease-in-out infinite; }
  .bar4 { height: 14px; animation: barDance 1s  0.15s ease-in-out infinite; }
  .bar5 { height: 8px;  animation: barDance 1s  0.00s ease-in-out infinite; }

  @keyframes barDance {
    0%,100% { transform: scaleY(0.3); }
    50%      { transform: scaleY(1); }
  }

  #music-btn.muted .bar            { animation-play-state: paused; transform: scaleY(0.3); }
  #music-btn.muted .music-bars     { opacity: 0.35; }
  #music-btn.muted .mute-slash     { opacity: 1; }

  .mute-slash {
    position: absolute;
    width: 2px;
    height: 30px;
    background: var(--rose);
    border-radius: 2px;
    transform: rotate(40deg);
    opacity: 0;
    transition: opacity 0.25s ease;
    pointer-events: none;
  }

  #music-toast {
    position: fixed;
    bottom: 5.2rem;
    right: 1rem;
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    backdrop-filter: blur(12px);
    color: var(--text-soft);
    font-family: 'Cormorant Garamond', serif;
    font-size: 0.78rem;
    letter-spacing: 0.05em;
    padding: 0.45rem 0.9rem;
    border-radius: 20px;
    box-shadow: 0 4px 16px var(--card-shadow);
    white-space: nowrap;
    opacity: 0;
    transform: translateY(6px);
    transition: opacity 0.4s ease, transform 0.4s ease, background 0.5s, color 0.5s, border-color 0.5s;
    pointer-events: none;
    z-index: 9999;
  }
  #music-toast.show { opacity: 1; transform: translateY(0); }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SPARKLES & RIPPLES
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .sparkle {
    position: fixed;
    pointer-events: none;
    z-index: 9998;
    animation: sparkleOut 0.75s ease-out forwards;
    font-style: normal;
  }
  @keyframes sparkleOut {
    0%   { opacity:1; transform:scale(0) rotate(0deg); }
    60%  { opacity:1; transform:scale(1.5) rotate(180deg); }
    100% { opacity:0; transform:scale(0.3) rotate(360deg); }
  }

  .tap-ripple {
    position: fixed;
    border-radius: 50%;
    pointer-events: none;
    z-index: 9997;
    border: 1.5px solid rgba(192,68,106,0.35);
    transform: translate(-50%,-50%) scale(0);
    animation: tapRipple 0.8s ease-out forwards;
  }
  @keyframes tapRipple {
    to { transform:translate(-50%,-50%) scale(6); opacity:0; }
  }
</style>
</head>
<body>

<!-- Scroll progress bar -->
<div id="progress-bar"></div>

<!-- Theme ripple overlay -->
<div id="theme-ripple"></div>

<!-- Theme toggle -->
<button id="theme-toggle" aria-label="Toggle theme">
  <span class="toggle-icon icon-sun">â˜€ï¸</span>
  <span class="toggle-icon icon-moon">ğŸŒ™</span>
</button>

<!-- Music toast hint -->
<div id="music-toast">ğŸµ Scroll to play music</div>

<!-- Music FAB -->
<button id="music-btn" class="muted" aria-label="Toggle music">
  <div class="music-bars">
    <div class="bar bar1"></div>
    <div class="bar bar2"></div>
    <div class="bar bar3"></div>
    <div class="bar bar4"></div>
    <div class="bar bar5"></div>
  </div>
  <div class="mute-slash"></div>
</button>

<canvas id="petal-canvas"></canvas>
<div class="orb orb1"></div>
<div class="orb orb2"></div>
<div class="orb orb3"></div>
<div class="orb orb4"></div>

<!-- â•â•â• HERO â•â•â• -->
<section class="page" id="hero">
  <p class="for-label">For the most magical sister in the world</p>
  <div class="name-wrap">
    <div class="name-glow-ring"></div>
    <h1 class="name">Deluluuuuu</h1>
  </div>
  <p class="hero-tagline">Today is all about you, sis ğŸŒ¹</p>
  <div class="hero-rose">ğŸŒ¸</div>
  <p class="hero-date">Â· Happy Birthday Â·</p>
  <div class="scroll-hint">
    <span>scroll</span>
    <div class="scroll-line"></div>
  </div>
</section>

<!-- â•â•â• SISTERHOOD â•â•â• -->
<section class="page" id="sister">
  <p class="section-eyebrow" data-reveal>A letter to my sister</p>
  <div class="glass-card" data-reveal>
    <span class="card-icon">ğŸŒ¹</span>
    <p>
      Having you as my sister is one of the <em>greatest gifts</em> life has ever given me. You are not just family â€” you are one of the <strong>most beautiful souls</strong> I have ever known, and I mean that with my whole heart.
    </p>
  </div>
  <div class="glass-card" data-reveal>
    <span class="card-icon">ğŸ•¯ï¸</span>
    <p>
      You carry a kind of warmth that fills every room you walk into. People feel it. <em>I feel it</em> every single day â€” and on your birthday, I just want you to feel that warmth reflecting right back at you.
    </p>
  </div>
</section>

<!-- â•â•â• WISHES â•â•â• -->
<section class="page" id="wishes">
  <h2 class="wishes-heading" data-reveal>Birthday Wishes</h2>
  <div class="wish-item" data-reveal style="transition-delay:0.1s">
    <div class="wi-icon">âœ¨</div>
    <div class="wi-text"><span class="wi-label">for your heart</span>May you always feel the joy that you so effortlessly give to everyone around you</div>
  </div>
  <div class="wish-item" data-reveal style="transition-delay:0.2s">
    <div class="wi-icon">ğŸŒº</div>
    <div class="wi-text"><span class="wi-label">for your dreams</span>May every dream you've whispered to yourself start blooming this very year</div>
  </div>
  <div class="wish-item" data-reveal style="transition-delay:0.3s">
    <div class="wi-icon">ğŸŒ™</div>
    <div class="wi-text"><span class="wi-label">for your soul</span>May you find peace in every quiet moment and magic in every ordinary day</div>
  </div>
  <div class="wish-item" data-reveal style="transition-delay:0.4s">
    <div class="wi-icon">ğŸ’›</div>
    <div class="wi-text"><span class="wi-label">for your path</span>May life take you places that make your eyes light up the way only yours can</div>
  </div>
  <div class="wish-item" data-reveal style="transition-delay:0.5s">
    <div class="wi-icon">ğŸŒ¹</div>
    <div class="wi-text"><span class="wi-label">always & forever</span>May you always know your sibling is your forever, unconditional cheerleader</div>
  </div>
</section>

<!-- â•â•â• MEMORY â•â•â• -->
<section class="page" id="memory">
  <div class="memory-quote" data-reveal data-typewriter='"Growing up with you was my favourite story"'></div>
  <div class="memory-divider" data-reveal>
    <div class="md-line"></div><div class="md-icon">ğŸŒ¸</div><div class="md-line"></div>
  </div>
  <p class="memory-body" data-reveal>
    Through every silly moment, every argument we forgot by dinner, every late-night laugh that made our stomachs hurt â€” you made growing up feel like an adventure. And I wouldn't trade a single chapter of it.
  </p>
</section>

<!-- â•â•â• FINALE â•â•â• -->
<section class="page" id="finale">
  <div class="finale-roses" data-reveal><span>ğŸŒ¹</span><span>ğŸŒ¸</span><span>ğŸŒ¹</span></div>
  <h2 class="finale-title" data-reveal>Happy Birthday,<br/>dear sister ğŸ‚</h2>
  <p class="finale-from" data-reveal>â€” with all the love a sibling could possibly hold</p>
  <div class="finale-seal" data-reveal>ğŸŒ¹</div>
</section>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME TOGGLE with ripple
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const html    = document.documentElement;
const ripple  = document.getElementById('theme-ripple');
const btn     = document.getElementById('theme-toggle');
let  isAnimating = false;

btn.addEventListener('click', () => {
  if (isAnimating) return;
  isAnimating = true;

  const nextTheme = html.dataset.theme === 'light' ? 'dark' : 'light';

  // Set ripple color BEFORE expanding (it reads --ripple-color from current theme)
  const rippleColor = nextTheme === 'dark'
    ? '#0a0005'   // expanding INTO dark
    : '#fff8fa';  // expanding INTO light
  ripple.style.background = rippleColor;

  // Expand
  ripple.classList.remove('collapsing');
  ripple.style.transition = 'none';
  ripple.style.transform  = 'translate(50%, -50%) scale(0)';
  ripple.style.opacity    = '0';

  requestAnimationFrame(() => {
    requestAnimationFrame(() => {
      ripple.classList.add('expanding');
      ripple.style.transition = 'transform 0.72s cubic-bezier(0.4,0,0.2,1), opacity 0.05s';
      ripple.style.opacity    = '1';
      ripple.style.transform  = 'translate(50%, -50%) scale(42)';

      // Swap theme at the midpoint
      setTimeout(() => {
        html.dataset.theme = nextTheme;
        updatePetalColors();
      }, 360);

      // Fade ripple out
      setTimeout(() => {
        ripple.style.transition = 'opacity 0.35s ease';
        ripple.style.opacity    = '0';
        setTimeout(() => {
          ripple.style.transform = 'translate(50%, -50%) scale(0)';
          isAnimating = false;
        }, 380);
      }, 600);
    });
  });
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PETAL CANVAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const canvas = document.getElementById('petal-canvas');
const ctx    = canvas.getContext('2d');
let W, H;
function resize(){ W=canvas.width=window.innerWidth; H=canvas.height=window.innerHeight; }
resize();
window.addEventListener('resize', resize);

const LIGHT_COLORS = ['#e07898','#f4c2d5','#c0446a','#d4a450','#fce8f0','#e8a0b8','#f9d0de'];
const DARK_COLORS  = ['#b03060','#e07898','#f4c2d5','#c9964e','#fff0f5','#d4708a','#e8c07a'];

let petalColors = document.documentElement.dataset.theme === 'dark' ? DARK_COLORS : LIGHT_COLORS;
function updatePetalColors(){
  petalColors = document.documentElement.dataset.theme === 'dark' ? DARK_COLORS : LIGHT_COLORS;
  petals.forEach(p => p.color = petalColors[Math.floor(Math.random()*petalColors.length)]);
}

function makePetal(){
  return {
    x: Math.random()*W,
    y: -20 - Math.random()*60,
    size: 5 + Math.random()*11,
    color: petalColors[Math.floor(Math.random()*petalColors.length)],
    speed: 0.4 + Math.random()*1.1,
    drift: (Math.random()-0.5)*0.7,
    rot: Math.random()*Math.PI*2,
    rotSpeed: (Math.random()-0.5)*0.05,
    sway: Math.random()*Math.PI*2,
    swaySpeed: 0.008 + Math.random()*0.018,
    alpha: 0.3 + Math.random()*0.45,
    type: Math.random() > 0.45 ? 'oval' : 'heart',
  };
}

let petals = [];
for(let i=0;i<40;i++){ const p=makePetal(); p.y=Math.random()*H; petals.push(p); }

function drawHeart(p){
  ctx.save();
  ctx.globalAlpha=p.alpha*0.8;
  ctx.translate(p.x,p.y);
  ctx.rotate(p.rot);
  const s=p.size*0.065;
  ctx.scale(s,s);
  ctx.fillStyle=p.color;
  ctx.beginPath();
  ctx.moveTo(0,-5);
  ctx.bezierCurveTo(5,-13,15,-13,15,-5);
  ctx.bezierCurveTo(15,3,7,10,0,18);
  ctx.bezierCurveTo(-7,10,-15,3,-15,-5);
  ctx.bezierCurveTo(-15,-13,-5,-13,0,-5);
  ctx.fill();
  ctx.restore();
}

function drawOval(p){
  ctx.save();
  ctx.globalAlpha=p.alpha;
  ctx.translate(p.x,p.y);
  ctx.rotate(p.rot);
  ctx.fillStyle=p.color;
  ctx.beginPath();
  ctx.ellipse(0,0,p.size*0.38,p.size,0,0,Math.PI*2);
  ctx.fill();
  ctx.restore();
}

function tick(){
  ctx.clearRect(0,0,W,H);
  if(Math.random()<0.15) petals.push(makePetal());
  petals=petals.filter(p=>p.y<H+50);
  for(const p of petals){
    p.sway+=p.swaySpeed;
    p.x+=p.drift+Math.sin(p.sway)*0.9;
    p.y+=p.speed;
    p.rot+=p.rotSpeed;
    p.type==='heart' ? drawHeart(p) : drawOval(p);
  }
  requestAnimationFrame(tick);
}
tick();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BIRTHDAY MUSIC ENGINE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const AC = window.AudioContext || window.webkitAudioContext;
let audioCtx   = null;
let masterGain = null;
let isMuted    = true;
let musicStarted = false;
let nextLoopTimeout = null;

// Happy Birthday melody: [frequency_hz, duration_in_beats]
const BEAT = 0.30; // seconds per beat
const GAP  = 0.8;  // silent beats between loops
const melody = [
  [392,0.75],[392,0.25],[440,1],[392,1],[523,1],[494,2.5],
  [392,0.75],[392,0.25],[440,1],[392,1],[587,1],[523,2.5],
  [392,0.75],[392,0.25],[784,1],[659,1],[523,1],[494,1],[440,2.5],
  [698,0.75],[698,0.25],[659,1],[523,1],[587,1],[523,3],
];
const MELODY_DURATION = melody.reduce((s,[,d])=>s+d,0)*BEAT + GAP*BEAT;

function initAudio(){
  if(audioCtx) return;
  audioCtx   = new AC();
  masterGain = audioCtx.createGain();
  masterGain.gain.value = 0;   // start silent; fade in
  masterGain.connect(audioCtx.destination);
}

function playNote(freq, startTime, beats){
  const dur = beats * BEAT;

  // Layered sine waves for a soft bell/music-box timbre
  [[1,0.55],[2,0.22],[3,0.10],[4,0.05]].forEach(([mult, amp])=>{
    const osc  = audioCtx.createOscillator();
    const gn   = audioCtx.createGain();
    osc.type = 'sine';
    osc.frequency.value = freq * mult;
    osc.connect(gn);
    gn.connect(masterGain);
    // Envelope: quick attack, exponential decay
    gn.gain.setValueAtTime(0, startTime);
    gn.gain.linearRampToValueAtTime(amp, startTime + 0.018);
    gn.gain.exponentialRampToValueAtTime(0.001, startTime + Math.min(dur * 0.9, 1.4));
    osc.start(startTime);
    osc.stop(startTime + Math.min(dur, 1.5));
  });
}

function scheduleMelody(){
  if(!audioCtx || isMuted) return;
  let t = audioCtx.currentTime + 0.05;
  melody.forEach(([freq, beats])=>{ playNote(freq, t, beats); t += beats*BEAT; });
  nextLoopTimeout = setTimeout(scheduleMelody, MELODY_DURATION * 1000);
}

function fadeGain(to, ms){
  if(!masterGain) return;
  masterGain.gain.cancelScheduledValues(audioCtx.currentTime);
  masterGain.gain.setValueAtTime(masterGain.gain.value, audioCtx.currentTime);
  masterGain.gain.linearRampToValueAtTime(to, audioCtx.currentTime + ms/1000);
}

function startMusic(){
  if(musicStarted) return;
  musicStarted = true;
  initAudio();
  if(audioCtx.state === 'suspended') audioCtx.resume();
  isMuted = false;
  musicBtn.classList.remove('muted');
  musicBtn.classList.add('playing');
  masterGain.gain.value = 0;
  fadeGain(0.42, 1200);
  scheduleMelody();
}

const musicBtn = document.getElementById('music-btn');
const toast    = document.getElementById('music-toast');

// Show toast hint after 1.5s
setTimeout(()=>{
  toast.classList.add('show');
  setTimeout(()=> toast.classList.remove('show'), 3200);
}, 1500);

// Start on first scroll
let scrollUnlocked = false;
window.addEventListener('scroll', ()=>{
  if(scrollUnlocked) return;
  scrollUnlocked = true;
  startMusic();
}, { passive: true, once: true });

// FAB toggle
musicBtn.addEventListener('click', ()=>{
  if(!musicStarted){
    // Manual start before scroll
    startMusic();
    return;
  }
  isMuted = !isMuted;
  if(isMuted){
    fadeGain(0, 600);
    musicBtn.classList.add('muted');
    musicBtn.classList.remove('playing');
    clearTimeout(nextLoopTimeout);
    nextLoopTimeout = null;
  } else {
    musicBtn.classList.remove('muted');
    musicBtn.classList.add('playing');
    fadeGain(0.42, 600);
    clearTimeout(nextLoopTimeout);
    nextLoopTimeout = null;
    scheduleMelody(); // always restart from the top
  }
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLL REVEAL + TYPEWRITER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TYPEWRITER_TEXT = '"Growing up with you was my favourite story"';
let twDone = false;

function runTypewriter(el){
  if(twDone) return;
  twDone = true;
  el.innerHTML = '';

  // Insert cursor
  const cursor = document.createElement('span');
  cursor.className = 'tw-cursor';
  el.appendChild(cursor);

  let i = 0;
  const speed = 45; // ms per character
  function typeNext(){
    if(i < TYPEWRITER_TEXT.length){
      // Insert char before cursor
      const char = document.createTextNode(TYPEWRITER_TEXT[i]);
      el.insertBefore(char, cursor);
      i++;
      setTimeout(typeNext, speed + (Math.random() * 20 - 10));
    } else {
      // Done typing â€” blink cursor 3 more times then fade it
      setTimeout(()=>{
        cursor.style.transition = 'opacity 0.5s';
        cursor.style.opacity = '0';
        setTimeout(()=> cursor.remove(), 600);
      }, 1400);
    }
  }
  setTimeout(typeNext, 300); // small delay before starting
}

const observer = new IntersectionObserver(entries=>{
  entries.forEach(e=>{
    if(e.isIntersecting){
      e.target.classList.add('visible');
      if(e.target.dataset.typewriter !== undefined){
        runTypewriter(e.target);
      }
    }
  });
},{threshold:0.2});
document.querySelectorAll('[data-reveal]').forEach(el=>observer.observe(el));

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCROLL PROGRESS BAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const progressBar = document.getElementById('progress-bar');
function updateProgress(){
  const scrolled = window.scrollY;
  const total    = document.documentElement.scrollHeight - window.innerHeight;
  const pct      = total > 0 ? (scrolled / total) * 100 : 0;
  progressBar.style.width = pct + '%';
}
window.addEventListener('scroll', updateProgress, { passive: true });
updateProgress();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PARALLAX ON SCROLL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const orb1El = document.querySelector('.orb1');
const orb2El = document.querySelector('.orb2');
const orb3El = document.querySelector('.orb3');
const orb4El = document.querySelector('.orb4');
const heroSection  = document.getElementById('hero');
const heroChildren = heroSection.querySelectorAll(
  '.for-label, .name-wrap, .hero-tagline, .hero-rose, .hero-date'
);

let lastScrollY = 0;
let parallaxRAF = null;

function applyParallax(){
  const sy = window.scrollY;

  // Orbs â€” each layer at a slightly different depth
  // They're position:fixed so we add a translateY offset to create movement
  orb1El.style.transform = `translate(0, ${sy * 0.08}px) scale(1)`;
  orb2El.style.transform = `translate(0, ${sy * -0.06}px) scale(1)`;
  orb3El.style.transform = `translate(0, ${sy * 0.12}px) scale(1)`;
  orb4El.style.transform = `translate(0, ${sy * -0.04}px) scale(1)`;

  // Hero content â€” moves up slightly slower than scroll = feels like it's further away
  const heroOffset = sy * 0.28;
  heroChildren.forEach(el => {
    el.style.transform = `translateY(${heroOffset}px)`;
  });

  parallaxRAF = null;
}

window.addEventListener('scroll', ()=>{
  if(!parallaxRAF) parallaxRAF = requestAnimationFrame(applyParallax);
}, { passive: true });

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGE-LOAD PARTICLE BURST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function spawnBurst(){
  const cx = window.innerWidth  / 2;
  const cy = window.innerHeight / 2;
  const BURST_SYMBOLS = ['ğŸŒ¸','ğŸŒ¹','âœ¦','âœ§','â‹','âœ¿','â€','ğŸ’—','â‹†','âœº'];
  const COUNT = 55;

  for(let i = 0; i < COUNT; i++){
    const el   = document.createElement('span');
    el.className = 'burst-particle';
    el.textContent = BURST_SYMBOLS[Math.floor(Math.random() * BURST_SYMBOLS.length)];

    const angle   = (Math.PI * 2 / COUNT) * i + (Math.random() - 0.5) * 0.4;
    const dist    = 80  + Math.random() * 220;
    const size    = 10  + Math.random() * 22;
    const delay   = Math.random() * 180;
    const dur     = 900 + Math.random() * 700;
    const tx      = Math.cos(angle) * dist;
    const ty      = Math.sin(angle) * dist;

    el.style.cssText = `
      left: ${cx}px; top: ${cy}px;
      font-size: ${size}px;
      opacity: 0;
      transform: translate(-50%, -50%) translate(0px, 0px) scale(0.2) rotate(0deg);
    `;
    document.body.appendChild(el);

    // Animate with JS for fine control
    setTimeout(()=>{
      const start = performance.now();
      function frame(now){
        const t = Math.min((now - start) / dur, 1);
        // ease out cubic
        const e = 1 - Math.pow(1 - t, 3);
        const opacity = t < 0.15
          ? t / 0.15                       // fade in
          : t > 0.6
            ? 1 - ((t - 0.6) / 0.4)       // fade out
            : 1;
        const scale = 0.2 + e * 0.8;
        const rot   = e * (Math.random() > 0.5 ? 360 : -360);
        el.style.opacity   = opacity;
        el.style.transform = `translate(-50%,-50%) translate(${e*tx}px,${e*ty}px) scale(${scale}) rotate(${rot}deg)`;
        if(t < 1) requestAnimationFrame(frame);
        else el.remove();
      }
      requestAnimationFrame(frame);
    }, delay);
  }
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SPARKLE + RIPPLE ON TAP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const SYMBOLS=['âœ¦','âœ§','â‹†','âœº','âœ¸','â‹','âœ¿','â€','Â·'];
const SPARK_COLORS=['#c0446a','#e07898','#d4a450','#f4c2d5','#b07830'];

function spawnSparkle(x,y){
  const s=document.createElement('span');
  s.className='sparkle';
  s.textContent=SYMBOLS[Math.floor(Math.random()*SYMBOLS.length)];
  const size=14+Math.random()*20;
  s.style.cssText=`left:${x+(Math.random()-0.5)*60}px;top:${y+(Math.random()-0.5)*60}px;font-size:${size}px;color:${SPARK_COLORS[Math.floor(Math.random()*SPARK_COLORS.length)]};`;
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),800);
}
function spawnTapRipple(x,y){
  const r=document.createElement('div');
  r.className='tap-ripple';
  r.style.cssText=`left:${x}px;top:${y}px;width:36px;height:36px;`;
  document.body.appendChild(r);
  setTimeout(()=>r.remove(),900);
}
function onInteract(x,y,fromBtn){
  if(fromBtn) return;
  spawnTapRipple(x,y);
  for(let i=0;i<6;i++) setTimeout(()=>spawnSparkle(x,y),i*55);
}

document.addEventListener('touchstart',e=>{
  for(const t of e.touches){
    const el=document.elementFromPoint(t.clientX,t.clientY);
    onInteract(t.clientX,t.clientY, el && (el.closest('#theme-toggle') || el.closest('#music-btn')));
  }
},{passive:true});
document.addEventListener('click',e=>{
  onInteract(e.clientX,e.clientY, e.target.closest('#theme-toggle') || e.target.closest('#music-btn'));
});
</script>
</body>
</html>
